// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var $body;
    window.$ptero = $('<img src="img/ptero-redactyl.png">').css({
      position: 'absolute',
      width: 300,
      height: 163,
      'z-index': 99999
    });
    $body = $('body');
    return $body.on('keypress', function(e) {
      var $redaction, maxT, minT;
      if (!/r/i.test(String.fromCharCode(e.which))) {
        return;
      }
      console.log("ptero-redactyl!");
      minT = $body.scrollTop();
      maxT = minT + $(window).height() - $ptero.height();
      $ptero.css({
        left: 0,
        top: Math.floor((Math.random() * (maxT - minT)) + minT)
      });
      $ptero.appendTo('body');
      $redaction = $('<div class="redaction">').css({
        position: 'absolute',
        'z-index': 99998,
        'background-color': 'black',
        height: 50,
        width: 0
      });
      $redaction.css({
        top: $ptero.position().top,
        left: $ptero.position().left
      }).appendTo('body');
      return $ptero.animate({
        left: $(window).width()
      }, {
        duration: 2000,
        step: function() {
          $redaction.width($(this).position().left);
          return console.log('step', this, arguments);
        },
        complete: function() {
          $ptero.css({
            left: 0
          });
          $ptero.detach();
          return setTimeout((function() {
            return $redaction.fadeOut('slow');
          }), 2000);
        }
      });
    });
  });

}).call(this);
